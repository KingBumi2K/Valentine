<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Valentine’s Day</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
/* BODY + LIGHT PINK GRADIENT */
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  font-family: 'Inter', sans-serif;
  overflow: hidden;
  background: linear-gradient(135deg, #ffe6f0 0%, #ffd6e8 40%, #ffc0d9 70%, #ffb3cc 100%);
  background-repeat: no-repeat;
  background-size: cover;
  background-attachment: fixed;
  position: relative;
}

/* HEADERS */
h1, h2 { font-family:'Playfair Display', serif; margin-bottom:20px; }
h1 { font-size:3em; } 
h2 { font-size:2em; }

/* PAGE CONTAINERS: FULLSCREEN, CENTERED, ABSOLUTE */
#splashPage, #mainContent, #finalScreen {
  position: absolute; 
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center; 
  align-items: center;
  text-align: center;
  box-sizing: border-box;
  padding: 0 20px;
  opacity: 0; /* hidden by default */
  pointer-events: none;
  transition: opacity 0.8s ease;
}

/* ACTIVE PAGE */
.page-active {
  opacity: 1;
  pointer-events: auto;
}

/* COLLAGE */
.collage { 
  display:flex; 
  flex-wrap:wrap; 
  justify-content:center; 
  gap:16px; 
  margin-top: 20px;   /* spacing below header */
  margin-bottom:40px; /* spacing above buttons */
}
.collage img { width:140px; height:140px; object-fit:cover; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,0.15); cursor:pointer; }

/* BUTTON GROUP */
.button-group { 
  display: flex; 
  justify-content: center; 
  gap: 16px; 
  margin: 30px 0; /* vertical spacing from collage and countdown */
}

/* COUNTDOWN */
#countdownCard { 
  margin-top: 20px; /* spacing above countdown card */
  padding:25px 40px; 
  max-width:420px; 
  background:rgba(255,255,255,0.7); 
  border-radius:30px; 
  box-shadow:0 10px 30px rgba(0,0,0,0.1); 
  font-size:1.3em; 
}

/* MAIN PAGE: center all elements with spacing */
#mainContent {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  gap: 16px; /* space between collage, header, buttons, countdown */
}

/* BUTTONS */
button {
  position: relative;
  padding:14px 32px;
  font-size:1.1em;
  border-radius:28px;
  border:none;
  background: linear-gradient(145deg,#ff8ab8,#ff5a91);
  color:white;
  cursor:pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: all 0.3s ease;
}
button:hover { transform: translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,0.2); }
#noBtn.hovered { position:absolute; cursor:pointer; }

/* Wiggle animation for No button */
@keyframes wiggle {0% { transform: translateX(0px); }25% { transform: translateX(-6px); }50% { transform: translateX(6px); }75% { transform: translateX(-4px); }100% { transform: translateX(0px);}}
#noBtn.wiggle { animation: wiggle 0.5s ease; }

/* HEARTS */
.heart { position: fixed; bottom: -40px; font-size: 20px; color: #ff99cc; opacity: 0.7; pointer-events: none; animation: floatUp 16s linear forwards; transform-origin: center; }
@keyframes floatUp {0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }25% { transform: translateY(-25vh) rotate(10deg); }50% { transform: translateY(-60vh) rotate(-10deg); opacity:0.85; }75% { transform: translateY(-90vh) rotate(5deg); }100% { transform: translateY(-120vh) rotate(-5deg); opacity: 0; }}

/* MODAL */
#modal { position:fixed; inset:0; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; }
#modal img { max-width:85%; max-height:85%; border-radius:20px; }

/* FINAL SCREEN */
#finalScreen { text-align:center; }
.final-line, #finalImage { opacity:0; transform:translateY(10px); transition: opacity 1.2s ease, transform 1.2s ease; }
.final-line.show, #finalImage.show { opacity:1; transform:translateY(0); }
.final-wink { opacity:0; font-size:1.1em; margin-top:30px; transition:opacity 2s ease; }
.final-wink.show { opacity:0.7; }

/* REPLAY BUTTON */
#replayBtn { margin-top:40px; opacity:0; pointer-events:none; transition: opacity 2s ease, transform 0.3s ease, box-shadow 0.3s ease; }
#replayBtn.show { opacity:1; pointer-events:auto; }
</style>
</head>

<body>

<!-- MUSIC -->
<audio id="bgMusic" loop>
  <source src="music/song.mp3" type="audio/mpeg">
</audio>

<!-- SPLASH PAGE -->
<div id="splashPage" class="page-active">
  <button id="startBtn">Touch me</button>
</div>

<!-- MAIN PAGE -->
<div id="mainContent">
  <div class="collage">
    <img src="images/pic1.jpg" onclick="openModal(this)">
    <img src="images/pic2.jpg" onclick="openModal(this)">
    <img src="images/pic3.jpg" onclick="openModal(this)">
    <img src="images/pic4.jpg" onclick="openModal(this)">
    <img src="images/pic5.jpg" onclick="openModal(this)">
    <img src="images/pic6.jpg" onclick="openModal(this)">
  </div>

  <h1 id="name"></h1>
  <h2>Will you be my Valentine?</h2>

  <div class="button-group">
    <button onclick="showFinal()">Yes</button>
    <button onclick="showFinal()">Obviously</button>
    <button id="noBtn">No</button>
  </div>

  <div id="countdownCard">
    <div id="countdown"></div>
  </div>
</div>

<!-- FINAL SCREEN -->
<div id="finalScreen">
  <h1 class="final-line">Happy Valentine’s Day, cutie</h1>
  <p class="final-line">Every day with you is my favorite one.</p>
  <p class="final-line">I’m keeping my vow to love you more each and every day — with intention, patience, and joy.</p>
  <p class="final-line">I choose you. Always.</p>
  <p class="final-wink">(Yes was the correct answer)</p>
  <img id="finalImage" src="images/final.jpg" alt="Final Image">
  <button id="replayBtn" onclick="replay()">Replay</button>
</div>

<!-- MODAL FOR COLLAGE -->
<div id="modal" onclick="this.style.display='none'">
  <img id="modalImg">
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  const music = document.getElementById("bgMusic");
  const splash = document.getElementById("splashPage");
  const mainContent = document.getElementById("mainContent");
  const finalScreen = document.getElementById("finalScreen");
  const startBtn = document.getElementById("startBtn");

  // START BUTTON CLICK
  startBtn.onclick = function(){
    splash.classList.remove("page-active");
    mainContent.classList.add("page-active");
    music.volume = 0.25;
    music.play();
  };

  // NAME FADE
  const nameText="Hannah Prillaman";
  const name=document.getElementById("name");
  nameText.split("").forEach((c,i)=>{
    const s=document.createElement("span");
    s.textContent=c;
    s.style.opacity=0;
    s.style.transition="opacity 0.6s ease";
    setTimeout(()=>s.style.opacity=1,i*120);
    name.appendChild(s);
  });

  // COUNTDOWN
  const countdown=document.getElementById("countdown");
  function updateCountdown(){
    const now=new Date();
    const target=new Date(new Date().getFullYear(),1,14);
    const diff=Math.max(target-now,0);
    const h=Math.floor(diff/36e5);
    const m=Math.floor(diff%36e5/6e4);
    const s=Math.floor(diff%6e4/1000);
    countdown.textContent=`${h}h ${m}m ${s}s until Valentine’s Day`;
  }
  setInterval(updateCountdown,1000);
  updateCountdown();

  // HEARTS
  function createHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = "❤";
    h.style.left = Math.random()*100 + "vw";
    const size = 18 + Math.random()*14;
    h.style.fontSize = size + "px";
    const duration = 14 + Math.random()*4;
    h.style.animationDuration = duration + "s";
    h.style.animationDelay = (Math.random()*4) + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), (duration+4)*1000);
  }
  setInterval(createHeart, 1200);

  // MODAL
  window.openModal=function(img){
    document.getElementById("modal").style.display="flex";
    document.getElementById("modalImg").src=img.src;
  };

  // NO BUTTON SMART
  const noBtn = document.getElementById("noBtn");
  const protectedElements = [document.querySelector(".collage"), document.getElementById("countdownCard"), document.querySelector(".button-group"), document.getElementById("name"), document.querySelector("h2")];
  function overlapsProtected(x, y){
    return protectedElements.some(el=>{
      const rect=el.getBoundingClientRect();
      return !(x+noBtn.offsetWidth<rect.left || x>rect.right || y+noBtn.offsetHeight<rect.top || y>rect.bottom);
    });
  }
  noBtn.onmouseover = function(){
    noBtn.classList.add("hovered");
    const margin=20;
    const maxX = window.innerWidth - noBtn.offsetWidth - margin;
    const maxY = window.innerHeight - noBtn.offsetHeight - margin;
    let x,y,attempts=0;
    do {
      x = Math.random()*maxX + margin;
      y = Math.random()*maxY + margin;
      attempts++;
    } while(overlapsProtected(x,y)&&attempts<100);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
    noBtn.classList.add("wiggle");
    noBtn.addEventListener("animationend", function handler(){ noBtn.classList.remove("wiggle"); noBtn.removeEventListener("animationend", handler); });
  };

  // FINAL SCREEN
  const replayBtn=document.getElementById("replayBtn");
  const finalImage=document.getElementById("finalImage");
  window.showFinal=function(){
    music.muted=false;
    mainContent.classList.remove("page-active");
    finalScreen.classList.add("page-active");

    const finalElements = [...document.querySelectorAll(".final-line"), finalImage];
    finalElements.forEach((el,i)=>{ setTimeout(()=>el.classList.add("show"), i*800); });
    setTimeout(()=>document.querySelector(".final-wink").classList.add("show"),3200);

    replayBtn.classList.remove("show");
    setTimeout(()=>replayBtn.classList.add("show"),20000);
  };

  // REPLAY
  window.replay=function(){
    finalScreen.classList.remove("page-active");
    mainContent.classList.add("page-active");
    document.querySelectorAll(".final-line,.final-wink, #finalImage").forEach(el=>el.classList.remove("show"));
    noBtn.classList.remove("hovered");
    noBtn.style.left=""; 
    noBtn.style.top="";
  };
});
</script>
</body>
</html>
