<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Valentine Surprise</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --pink-grad: linear-gradient(145deg, #ff8ab8, #ff5a91);
  --font-main: clamp(1.4rem, 6vw, 2.2rem);
  --font-body: clamp(0.9rem, 3.5vw, 1.2rem);
}

html, body {
  margin: 0; padding: 0;
  width: 100%; height: 100dvh;
  font-family: 'Inter', sans-serif;
  overflow: hidden; /* Prevent body scroll */
  background: linear-gradient(135deg, #ffe6f0 0%, #ffc0d9 100%);
  touch-action: manipulation;
}

/* Scroll-Safe Page Container */
.page {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  box-sizing: border-box;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.8s ease, visibility 0.8s ease;
  overflow-y: auto; /* Allows scrolling if content is too tall for small screens */
  -webkit-overflow-scrolling: touch;
}

/* Center content vertically if it fits */
.page::before, .page::after { content: ''; margin: auto; }

.page.visible { opacity: 1; visibility: visible; z-index: 2; }

/* Collage - 2 columns on mobile, 3 on desktop */
.collage { 
  display: grid; 
  grid-template-columns: repeat(2, 1fr); 
  gap: 10px; 
  margin-bottom: 15px;
  width: 100%;
  max-width: 450px;
  flex-shrink: 0; /* Prevents images from squishing */
}
@media (min-width: 600px) {
  .collage { grid-template-columns: repeat(3, 1fr); max-width: 600px; }
}
.collage img { 
  width: 100%; aspect-ratio: 1/1; 
  object-fit: cover; border-radius: 15px; 
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

/* Typography */
h1 { font-size: var(--font-main); margin: 10px 0; font-family: 'Playfair Display', serif; color: #ff4d6d; }
h2 { font-size: calc(var(--font-body) * 1.1); font-weight: 400; margin-bottom: 15px; color: #555; }

/* Buttons */
.button-group {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 15px 0;
  position: relative;
  width: 100%;
  flex-shrink: 0;
}
button {
  padding: 12px 24px;
  border-radius: 30px;
  border: none;
  font-size: 1rem;
  background: var(--pink-grad);
  color: white;
  font-family: 'Playfair Display', serif;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  white-space: nowrap;
}

/* Desktop Hover Effects */
@media (hover: hover) {
  button:not(#noBtn):hover { transform: translateY(-2px); filter: brightness(1.05); }
  .collage img:hover { transform: scale(1.05); }
}

#noBtn { position: absolute; z-index: 100; transition: left 0.3s ease, top 0.3s ease; min-width: 80px; }

/* Pulsating Countdown Card */
#countdownCard { 
  margin-top: 10px; 
  padding: 15px 20px; 
  background: rgba(255,255,255,0.6); 
  backdrop-filter: blur(5px);
  border-radius: 20px; 
  font-size: var(--font-body);
  animation: cardPulse 2.5s infinite ease-in-out;
}
@keyframes cardPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

/* Hearts */
.heart { position: fixed; bottom: -50px; pointer-events: none; z-index: 1; }
@keyframes floatUp {
  0% { bottom: -50px; opacity: 0; }
  10% { opacity: 0.7; }
  100% { bottom: 110vh; opacity: 0; transform: translateX(25px) rotate(20deg); }
}

/* Final Page */
#finalPage p.final-line { font-size: var(--font-body); margin: 6px 0; color: #444; }
#finalImage { 
  max-width: 80%; max-height: 35vh; 
  border-radius: 15px; margin-top: 10px; opacity: 0; 
  transition: opacity 1s ease;
}
#finalImage.show { opacity: 1; }
#replayBtn { opacity: 0; visibility: hidden; transition: opacity 1s; margin-top: 20px; }
#replayBtn.show { opacity: 1; visibility: visible; }
</style>
</head>
<body>

<audio id="bgMusic" loop><source src="music/song.mp3" type="audio/mpeg"></audio>

<div id="splashPage" class="page visible">
  <button id="startBtn">Touch Me</button>
</div>

<div id="mainPage" class="page">
  <div class="collage">
    <img src="images/pic1.jpg"><img src="images/pic2.jpg"><img src="images/pic3.jpg">
    <img src="images/pic4.jpg"><img src="images/pic5.jpg"><img src="images/pic6.jpg">
  </div>
  <h1 id="name"></h1>
  <h2>Will you be my Valentine?</h2>
  <div class="button-group">
    <button id="yesBtn">Yes</button>
    <button id="obviouslyBtn">Obviously</button>
    <button class="ghostBtn" style="visibility:hidden; pointer-events:none;">No</button>
    <button id="noBtn">No</button>
  </div>
  <div id="countdownCard"><div id="countdown"></div></div>
</div>

<div id="finalPage" class="page">
  <h1 class="final-line">Happy Valentine’s Day!</h1>
  <p class="final-line">Every day I'm with you is my favorite.</p>
  <p class="final-line">I’m keeping my vow to love you more each and every day — with intention, patience, and joy.</p>
  <p class="final-line">I choose you. Always.</p>
  <img id="finalImage" src="images/final.jpg">
  <button id="replayBtn" onclick="replay()">Replay</button>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){
  const noBtn = document.getElementById("noBtn");
  const ghostBtn = document.querySelector(".ghostBtn");
  const finalLines = document.querySelectorAll(".final-line");
  const finalImage = document.getElementById("finalImage");
  const replayBtn = document.getElementById("replayBtn");
  
  let firstInteraction = true;
  let noCount = 0;
  const responses = ["Wait...", "Really?", "Nope!", "Try again!", "Are you sure?", "Think again!", "Okay, fine!"];

  function alignNoButton() {
    noBtn.style.transition = "none";
    noBtn.style.position = "absolute";
    noBtn.style.left = ghostBtn.offsetLeft + "px";
    noBtn.style.top = ghostBtn.offsetTop + "px";
    noBtn.offsetHeight;
    noBtn.style.transition = "left 0.3s ease, top 0.3s ease";
    firstInteraction = true;
  }

  const runAway = (e) => {
    if (e.type === 'touchstart') e.preventDefault();
    noCount++;
    if (noCount % 2 === 0) {
      noBtn.innerText = responses[Math.min(Math.floor(noCount/2)-1, responses.length-1)];
    }
    if (firstInteraction) {
      const rect = noBtn.getBoundingClientRect();
      noBtn.style.position = 'fixed';
      noBtn.style.left = rect.left + 'px';
      noBtn.style.top = rect.top + 'px';
      firstInteraction = false;
    }
    const p = 30;
    const maxX = window.innerWidth - noBtn.offsetWidth - p;
    const maxY = window.innerHeight - noBtn.offsetHeight - p;
    noBtn.style.left = (Math.random() * (maxX - p) + p) + 'px';
    noBtn.style.top = (Math.random() * (maxY - p) + p) + 'px';
  };

  const isTouch = ('ontouchstart' in window);
  noBtn.addEventListener(isTouch ? 'touchstart' : 'mouseover', runAway);

  document.getElementById("startBtn").onclick = () => {
    document.getElementById("splashPage").classList.remove("visible");
    document.getElementById("mainPage").classList.add("visible");
    document.getElementById("bgMusic").play();
    const name = "Hannah Prillaman";
    const container = document.getElementById("name");
    container.innerHTML = "";
    name.split("").forEach((l, i) => {
      const s = document.createElement("span");
      s.innerHTML = l === " " ? "&nbsp;" : l;
      container.appendChild(s);
      setTimeout(() => s.classList.add("show"), i * 100);
    });
    setTimeout(alignNoButton, 300);
  };

  function showFinal() {
    document.getElementById("mainPage").classList.remove("visible");
    document.getElementById("finalPage").classList.add("visible");
    finalLines.forEach((l, i) => setTimeout(() => l.classList.add("show"), i * 600));
    setTimeout(() => finalImage.classList.add("show"), 2500);
    setTimeout(() => replayBtn.classList.add("show"), 15000);
  }

  document.getElementById("yesBtn").onclick = showFinal;
  document.getElementById("obviouslyBtn").onclick = showFinal;
  noBtn.onclick = showFinal;

  window.replay = () => location.reload();

  // Hearts Flow
  setInterval(() => {
    const h = document.createElement('div');
    h.className = 'heart'; h.innerHTML = '❤';
    h.style.left = Math.random() * 100 + 'vw';
    h.style.color = ['#ff4d6d','#ff758f','#ffffff'][Math.floor(Math.random()*3)];
    h.style.fontSize = (Math.random() * 20 + 10) + 'px';
    h.style.animation = `floatUp ${Math.random()*5 + 10}s linear forwards`;
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 15000);
  }, isTouch ? 600 : 350);

  window.addEventListener('resize', alignNoButton);
});
</script>
</body>
</html>
