<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Surprise</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0;
  width:100%; height:100%;
  font-family:'Inter', sans-serif;
  overflow:hidden;
  background: linear-gradient(135deg, #ffe6f0 0%, #ffc0d9 100%);
}

/* Pages */
.page {
  position:absolute;
  top:0; left:0;
  width:100vw; height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:20px;
  box-sizing:border-box;
  opacity:0;
  transition:opacity 1s ease;
}
.page.visible { opacity:1; z-index:2; }

/* Collage */
.collage { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; margin-bottom:20px; }
.collage img { width:160px; height:160px; object-fit:cover; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,0.15); cursor:pointer; transition:transform 0.3s; }
.collage img:hover { transform:scale(1.05); }

/* Buttons */
.button-group {
  display:flex;
  gap:20px;
  margin-top:20px;
  position:relative; /* for No hover move */
}
.button-group button, #startBtn {
  padding:14px 32px;
  border-radius:28px;
  border:none;
  font-size:1.1em;
  background:linear-gradient(145deg,#ff8ab8,#ff5a91);
  color:white;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.15);
  transition:all 0.3s ease;
}
.button-group button:hover, #startBtn:hover { transform:translateY(-2px); }

#noBtn {
  position:relative; /* start inline */
  transition:left 0.5s ease, top 0.5s ease;
}
#noBtn.wiggle { animation: wiggle 0.5s ease; }
@keyframes wiggle {0%{transform:translateX(0);}25%{transform:translateX(-6px);}50%{transform:translateX(6px);}75%{transform:translateX(-4px);}100%{transform:translateX(0);}}

/* Countdown */
#countdownCard { margin-top:20px; padding:20px 30px; max-width:380px; background:rgba(255,255,255,0.7); border-radius:25px; box-shadow:0 10px 25px rgba(0,0,0,0.1); font-size:1.2em; }

/* Hearts */
.heart {
  position:fixed;
  bottom:-40px;
  font-size:20px;
  color:#ff99cc;
  opacity:0.7;
  pointer-events:none;
  animation:floatUp 16s linear forwards;
  z-index:1;
}
@keyframes floatUp {0%{transform:translateY(0) rotate(0deg); opacity:0.7;}50%{transform:translateY(-60vh) rotate(10deg);}100%{transform:translateY(-120vh) rotate(-10deg); opacity:0;}}

/* Name animation */
#name span {
  opacity:0;
  display:inline-block;
  transform: translateY(10px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
#name span.show {
  opacity:1;
  transform: translateY(0);
}

/* Final Page */
#finalPage {display:flex; flex-direction:column; justify-content:flex-start; align-items:center; text-align:center; padding:40px 20px; gap:15px;}
.final-line, #finalImage { opacity:0; transform:translateY(10px); transition:opacity 1.2s ease, transform 1.2s ease; }
.final-line.show, #finalImage.show { opacity:1; transform:translateY(0); }
.final-wink { opacity:0; font-size:1.1em; margin-top:20px; transition: opacity 2s ease; }
.final-wink.show { opacity:0.7; }

/* Final image */
#finalImage { max-width:60%; max-height:50%; border-radius:18px; display:block; }

/* Replay */
#replayBtn { margin-top:30px; opacity:0; pointer-events:none; transition:opacity 2s ease; }
#replayBtn.show { opacity:1; pointer-events:auto; }

/* Modal */
#modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); align-items:center; justify-content:center; }
#modal img { max-width:85%; max-height:85%; border-radius:20px; }
</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="music/song.mp3" type="audio/mpeg">
</audio>

<!-- Splash -->
<div id="splashPage" class="page visible">
  <button id="startBtn">Touch Me</button>
</div>

<!-- Main -->
<div id="mainPage" class="page">
  <div class="collage">
    <img src="images/pic1.jpg" onclick="openModal(this)">
    <img src="images/pic2.jpg" onclick="openModal(this)">
    <img src="images/pic3.jpg" onclick="openModal(this)">
    <img src="images/pic4.jpg" onclick="openModal(this)">
    <img src="images/pic5.jpg" onclick="openModal(this)">
    <img src="images/pic6.jpg" onclick="openModal(this)">
  </div>
  <h1 id="name"></h1>
  <h2>Hannah Prillaman, will you be my Valentine?</h2>
  <div class="button-group">
    <button id="yesBtn">Yes</button>
    <button id="obviouslyBtn">Obviously</button>
    <button id="noBtn">No</button>
  </div>
  <div id="countdownCard">
    <div id="countdown"></div>
  </div>
</div>

<!-- Final -->
<div id="finalPage" class="page">
  <h1 class="final-line">Happy Valentine’s Day, cutie!</h1>
  <p class="final-line">Every day with you is my favorite one.</p>
  <p class="final-line">I’m keeping my vow to love you more each and every day — with intention, patience, and joy.</p>
  <p class="final-line">I choose you. Always.</p>
  <img id="finalImage" src="images/final.jpg" alt="Final Image">
  <p class="final-wink">(Yes was the correct answer)</p>
  <button id="replayBtn" onclick="replay()">Replay</button>
</div>

<!-- Modal -->
<div id="modal" onclick="this.style.display='none'">
  <img id="modalImg">
</div>

<!-- Hearts -->
<div class="heart">❤</div>
<div class="heart">❤</div>
<div class="heart">❤</div>

<script>
document.addEventListener("DOMContentLoaded", function(){
  const splash=document.getElementById("splashPage");
  const main=document.getElementById("mainPage");
  const final=document.getElementById("finalPage");
  const startBtn=document.getElementById("startBtn");
  const music=document.getElementById("bgMusic");
  const noBtn=document.getElementById("noBtn");
  const replayBtn=document.getElementById("replayBtn");
  const finalImage=document.getElementById("finalImage");
  const finalLines=document.querySelectorAll(".final-line");
  const nameContainer=document.getElementById("name");

  // Splash click
  startBtn.onclick=function(){
    splash.classList.remove("visible");
    main.classList.add("visible");
    music.volume=0.25;
    music.play();

    // Animate name letter by letter
    const name = "Hannah Prillaman";
    nameContainer.innerHTML = "";
    name.split("").forEach((letter, index) => {
      const span=document.createElement("span");
      span.textContent=letter;
      nameContainer.appendChild(span);
      setTimeout(()=>span.classList.add("show"), index*150);
    });
  }

  // Countdown
  const countdown=document.getElementById("countdown");
  function updateCountdown(){
    const now=new Date();
    const target=new Date(new Date().getFullYear(),1,14); // Feb 14
    const diff=Math.max(target-now,0);
    const d=Math.floor(diff/86400000);
    const h=Math.floor((diff%86400000)/3600000);
    const m=Math.floor((diff%3600000)/60000);
    const s=Math.floor((diff%60000)/1000);
    countdown.textContent=`${d}d ${h}h ${m}m ${s}s until Valentine’s Day`;
  }
  setInterval(updateCountdown,1000);
  updateCountdown();

  // No button hover
  const protectedElements=[document.querySelector(".collage"), document.getElementById("countdownCard"), document.querySelector(".button-group"), document.getElementById("name"), document.querySelector("h2")];
  function overlaps(x,y){
    return protectedElements.some(el=>{
      const r=el.getBoundingClientRect();
      return !(x+noBtn.offsetWidth<r.left||x>r.right||y+noBtn.offsetHeight<r.top||y>r.bottom);
    });
  }
  noBtn.onmouseover=function(){
    noBtn.style.position='absolute';
    let x,y,attempts=0;
    const margin=10;
    const maxX=window.innerWidth-noBtn.offsetWidth-margin;
    const maxY=window.innerHeight-noBtn.offsetHeight-margin;
    do{x=Math.random()*maxX+margin; y=Math.random()*maxY+margin; attempts++;} 
    while(overlaps(x,y)&&attempts<100);
    noBtn.style.left=x+'px';
    noBtn.style.top=y+'px';
    noBtn.classList.add("wiggle");
    noBtn.addEventListener("animationend",function h(){ noBtn.classList.remove("wiggle"); noBtn.removeEventListener("animationend",h); });
  }

  // Modal
  window.openModal=function(img){
    const modal=document.getElementById("modal");
    modal.style.display="flex";
    document.getElementById("modalImg").src=img.src;
  }

  // Show final
  function showFinal(){
    main.classList.remove("visible");
    final.classList.add("visible");
    finalLines.forEach((el,i)=>setTimeout(()=>el.classList.add("show"),i*800));
    setTimeout(()=>finalImage.classList.add("show"),2400);
    setTimeout(()=>document.querySelector(".final-wink").classList.add("show"),3200);
    replayBtn.classList.remove("show");
    setTimeout(()=>replayBtn.classList.add("show"),20000);
  }

  // Button clicks
  document.getElementById("yesBtn").onclick=showFinal;
  document.getElementById("obviouslyBtn").onclick=showFinal;
  noBtn.onclick=showFinal;

  // Replay
  window.replay=function(){
    final.classList.remove("visible");
    finalLines.forEach(el=>el.classList.remove("show"));
    document.querySelector(".final-wink").classList.remove("show");
    replayBtn.classList.remove("show");
    finalImage.classList.remove("show");
    main.classList.add("visible");
    noBtn.style.position='relative';
    noBtn.style.left='0';
    noBtn.style.top='0';
    // Reset name animation
    nameContainer.innerHTML = "";
    const name="Hannah Prillaman";
    name.split("").forEach((letter,index)=>{
      const span=document.createElement("span");
      span.textContent=letter;
      nameContainer.appendChild(span);
      setTimeout(()=>span.classList.add("show"), index*150);
    });
  }

});
</script>
</body>
</html>
