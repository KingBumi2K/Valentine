<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Valentine’s Day</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: radial-gradient(circle at top, #ffe6f0, transparent 70%), linear-gradient(#ffd6e8, #ffffff);
  overflow-x: hidden;
}

h1, h2 { font-family:'Playfair Display', serif; margin-bottom:20px; }
h1 { font-size:3em; } h2 { font-size:2em; }

#mainContent { text-align:center; padding:80px 20px; position:relative; }

.collage { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; margin-bottom:50px; }
.collage img { width:140px; height:140px; object-fit:cover; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,0.15); cursor:pointer; }

#countdownCard { margin:40px auto; padding:25px 40px; max-width:420px; background:rgba(255,255,255,0.7); border-radius:30px; box-shadow:0 10px 30px rgba(0,0,0,0.1); font-size:1.3em; }

button { font-size:1.1em; padding:14px 32px; margin:10px; border-radius:30px; border:none; background:#ff4d88; color:white; cursor:pointer; position:relative; }
button:hover { background:#ff2f73; }

#noBtn { position:absolute; cursor:pointer; }

.heart { position:fixed; bottom:-40px; font-size:26px; color:#ff99cc; opacity:0.7; animation:floatUp 12s linear; pointer-events:none; }
@keyframes floatUp { to { transform:translateY(-120vh); opacity:0; } }

#modal { position:fixed; inset:0; background:rgba(0,0,0,0.8); display:none; align-items:center; justify-content:center; }
#modal img { max-width:85%; max-height:85%; border-radius:20px; }

#finalScreen { position:fixed; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:40px; opacity:0; pointer-events:none; transition:opacity 2s ease; background: radial-gradient(circle at top, #ffe6f0, transparent 70%), linear-gradient(#ffd6e8, #ffffff); }

.final-line { opacity:0; transform:translateY(10px); transition: opacity 1.2s ease, transform 1.2s ease; }
.final-line.show { opacity:1; transform:translateY(0); }

.final-wink { opacity:0; font-size:1.1em; margin-top:30px; transition:opacity 2s ease; }
.final-wink.show { opacity:0.7; }

#finalImage { margin-top:30px; width:240px; border-radius:18px; box-shadow:0 10px 25px rgba(0,0,0,0.2); }

#replayBtn { margin-top:40px; font-size:1em; padding:12px 28px; border-radius:25px; background:#ff4d88; color:white; opacity:0; pointer-events:none; transition:opacity 2s ease; }
#replayBtn.show { opacity:1; pointer-events:auto; }
</style>
</head>

<body>

<audio id="bgMusic" loop muted>
  <source src="music/song.mp3" type="audio/mpeg">
</audio>

<div id="mainContent">
  <div class="collage">
    <img src="images/pic1.jpg" onclick="openModal(this)">
    <img src="images/pic2.jpg" onclick="openModal(this)">
    <img src="images/pic3.jpg" onclick="openModal(this)">
    <img src="images/pic4.jpg" onclick="openModal(this)">
    <img src="images/pic5.jpg" onclick="openModal(this)">
    <img src="images/pic6.jpg" onclick="openModal(this)">
  </div>

  <h1 id="name"></h1>
  <h2>Will you be my Valentine?</h2>

  <button onclick="showFinal()">Yes</button>
  <button onclick="showFinal()">Obviously</button>
  <button id="noBtn">No</button>

  <div id="countdownCard">
    <div id="countdown"></div>
  </div>
</div>

<div id="finalScreen">
  <h1 class="final-line">Happy Valentine’s Day, cutie</h1>
  <p class="final-line">Every day with you is my favorite one.</p>
  <p class="final-line">I’m keeping my vow to love you more each and every day — with intention, patience, and joy.</p>
  <p class="final-line">I choose you. Always.</p>
  <p class="final-wink">(Yes was the correct answer)</p>
  <img id="finalImage" src="images/final.jpg" alt="Final Image">
  <button id="replayBtn" onclick="replay()">Replay</button>
</div>

<div id="modal" onclick="this.style.display='none'">
  <img id="modalImg">
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {

  // NAME FADE
  const nameText="Hannah Prillaman";
  const name=document.getElementById("name");
  nameText.split("").forEach((c,i)=>{
    const s=document.createElement("span");
    s.textContent=c;
    s.style.opacity=0;
    s.style.transition="opacity 0.6s ease";
    setTimeout(()=>s.style.opacity=1,i*120);
    name.appendChild(s);
  });

  // COUNTDOWN
  const countdown=document.getElementById("countdown");
  function updateCountdown(){
    const now=new Date();
    const target=new Date(new Date().getFullYear(),1,14);
    const diff=Math.max(target-now,0);
    const h=Math.floor(diff/36e5);
    const m=Math.floor(diff%36e5/6e4);
    const s=Math.floor(diff%6e4/1000);
    countdown.textContent=`${h}h ${m}m ${s}s until Valentine’s Day`;
  }
  setInterval(updateCountdown,1000);
  updateCountdown();

  // HEARTS
  function createHeart(){
    const h=document.createElement("div");
    h.className="heart";
    h.textContent="❤";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),12000);
  }
  setInterval(createHeart,2000);

  // MODAL
  window.openModal=function(img){
    document.getElementById("modal").style.display="flex";
    document.getElementById("modalImg").src=img.src;
  };

  // MUSIC
  const music=document.getElementById("bgMusic");
  music.volume=0.25;
  music.play();

  // SMART NO BUTTON
  const noBtn=document.getElementById("noBtn");
  const mainContent=document.getElementById("mainContent");
  const collage=document.querySelector(".collage");
  const countdownCard=document.getElementById("countdownCard");

  // start in center
  let startX=(window.innerWidth/2-50);
  let startY=150;
  noBtn.style.left=startX+"px";
  noBtn.style.top=startY+"px";

  noBtn.onmouseover=function(){
    const margin=20;
    const maxX=window.innerWidth-100-margin;
    const maxY=window.innerHeight-60-margin;

    let x, y, attempts=0;
    do {
      x=Math.random()*maxX+margin;
      y=Math.random()*maxY+margin;
      attempts++;
      // prevent overlap with collage
      const collageRect=collage.getBoundingClientRect();
      const countdownRect=countdownCard.getBoundingClientRect();
    } while ((x+80>collageRect.left && x<collageRect.right && y+30>collageRect.top && y<collageRect.bottom) ||
             (x+80>countdownRect.left && x<countdownRect.right && y+30>countdownRect.top && y<countdownRect.bottom)
             && attempts<50);
    noBtn.style.left=x+"px";
    noBtn.style.top=y+"px";
  };

  // FINAL SCREEN
  const finalScreen=document.getElementById("finalScreen");
  const replayBtn=document.getElementById("replayBtn");
  window.showFinal=function(){
    music.muted=false;
    document.getElementById("mainContent").style.opacity=0;
    finalScreen.style.pointerEvents="auto";
    finalScreen.style.opacity=1;

    document.querySelectorAll(".final-line").forEach((l,i)=>{
      setTimeout(()=>l.classList.add("show"),i*800);
    });
    setTimeout(()=>document.querySelector(".final-wink").classList.add("show"),3200);

    replayBtn.classList.remove("show");
    setTimeout(()=>replayBtn.classList.add("show"),20000);
  };

  // REPLAY
  window.replay=function(){
    finalScreen.style.opacity=0;
    finalScreen.style.pointerEvents="none";
    document.getElementById("mainContent").style.opacity=1;
    document.querySelectorAll(".final-line,.final-wink").forEach(el=>el.classList.remove("show"));
    // Reset no button to start
    noBtn.style.left=startX+"px";
    noBtn.style.top=startY+"px";
  };

});
</script>
</body>
</html>
